# Source: https://github.com/Hats-Protocol/chain-modules

[Hats-Protocol](https://github.com/Hats-Protocol)/ **[chain-modules](https://github.com/Hats-Protocol/chain-modules)** Public

generated from [Hats-Protocol/hats-module-template](https://github.com/Hats-Protocol/hats-module-template)

- [Notifications](https://github.com/login?return_to=%2FHats-Protocol%2Fchain-modules) You must be signed in to change notification settings
- [Fork\\
1](https://github.com/login?return_to=%2FHats-Protocol%2Fchain-modules)
- [Star\\
1](https://github.com/login?return_to=%2FHats-Protocol%2Fchain-modules)


### License

[MIT license](https://github.com/Hats-Protocol/chain-modules/blob/main/LICENSE)

[1\\
star](https://github.com/Hats-Protocol/chain-modules/stargazers) [1\\
fork](https://github.com/Hats-Protocol/chain-modules/forks) [Branches](https://github.com/Hats-Protocol/chain-modules/branches) [Tags](https://github.com/Hats-Protocol/chain-modules/tags) [Activity](https://github.com/Hats-Protocol/chain-modules/activity)

[Star](https://github.com/login?return_to=%2FHats-Protocol%2Fchain-modules)

[Notifications](https://github.com/login?return_to=%2FHats-Protocol%2Fchain-modules) You must be signed in to change notification settings

# Hats-Protocol/chain-modules

main

[**4** Branches](https://github.com/Hats-Protocol/chain-modules/branches) [**1** Tag](https://github.com/Hats-Protocol/chain-modules/tags)

[Go to Branches page](https://github.com/Hats-Protocol/chain-modules/branches)[Go to Tags page](https://github.com/Hats-Protocol/chain-modules/tags)

Go to file

Code

Open more actions menu

## Folders and files

| Name | Name | Last commit message | Last commit date |
| --- | --- | --- | --- |
| ## Latest commit<br>[![spengrah](https://avatars.githubusercontent.com/u/13247381?v=4&size=40)](https://github.com/spengrah)[spengrah](https://github.com/Hats-Protocol/chain-modules/commits?author=spengrah)<br>[Merge pull request](https://github.com/Hats-Protocol/chain-modules/commit/03dd0c74cd3da3681cd66f9adcffe537675dfa31) [#2](https://github.com/Hats-Protocol/chain-modules/pull/2) [from Hats-Protocol/license](https://github.com/Hats-Protocol/chain-modules/commit/03dd0c74cd3da3681cd66f9adcffe537675dfa31)<br>Open commit details<br>Jun 20, 2024<br>[03dd0c7](https://github.com/Hats-Protocol/chain-modules/commit/03dd0c74cd3da3681cd66f9adcffe537675dfa31) · Jun 20, 2024<br>## History<br>[12 Commits](https://github.com/Hats-Protocol/chain-modules/commits/main/) <br>Open commit details<br>[View commit history for this file.](https://github.com/Hats-Protocol/chain-modules/commits/main/) |
| [.github/workflows](https://github.com/Hats-Protocol/chain-modules/tree/main/.github/workflows "This path skips through empty directories") | [.github/workflows](https://github.com/Hats-Protocol/chain-modules/tree/main/.github/workflows "This path skips through empty directories") | [Initial commit](https://github.com/Hats-Protocol/chain-modules/commit/1ea668a8075befd215f1532a277e5964930e6893 "Initial commit") | Apr 3, 2024 |
| [lib](https://github.com/Hats-Protocol/chain-modules/tree/main/lib "lib") | [lib](https://github.com/Hats-Protocol/chain-modules/tree/main/lib "lib") | [Initial commit](https://github.com/Hats-Protocol/chain-modules/commit/1ea668a8075befd215f1532a277e5964930e6893 "Initial commit") | Apr 3, 2024 |
| [script](https://github.com/Hats-Protocol/chain-modules/tree/main/script "script") | [script](https://github.com/Hats-Protocol/chain-modules/tree/main/script "script") | [toggles chain script deploy params](https://github.com/Hats-Protocol/chain-modules/commit/2b5dca343e2303631f368806380bf1123a3eff25 "toggles chain script deploy params") | Apr 3, 2024 |
| [src](https://github.com/Hats-Protocol/chain-modules/tree/main/src "src") | [src](https://github.com/Hats-Protocol/chain-modules/tree/main/src "src") | [init](https://github.com/Hats-Protocol/chain-modules/commit/3769773aa822cf3068038c12ceab210ee15c8889 "init") | Apr 3, 2024 |
| [test](https://github.com/Hats-Protocol/chain-modules/tree/main/test "test") | [test](https://github.com/Hats-Protocol/chain-modules/tree/main/test "test") | [init](https://github.com/Hats-Protocol/chain-modules/commit/3769773aa822cf3068038c12ceab210ee15c8889 "init") | Apr 3, 2024 |
| [.gitignore](https://github.com/Hats-Protocol/chain-modules/blob/main/.gitignore ".gitignore") | [.gitignore](https://github.com/Hats-Protocol/chain-modules/blob/main/.gitignore ".gitignore") | [Initial commit](https://github.com/Hats-Protocol/chain-modules/commit/1ea668a8075befd215f1532a277e5964930e6893 "Initial commit") | Apr 3, 2024 |
| [.gitmodules](https://github.com/Hats-Protocol/chain-modules/blob/main/.gitmodules ".gitmodules") | [.gitmodules](https://github.com/Hats-Protocol/chain-modules/blob/main/.gitmodules ".gitmodules") | [Initial commit](https://github.com/Hats-Protocol/chain-modules/commit/1ea668a8075befd215f1532a277e5964930e6893 "Initial commit") | Apr 3, 2024 |
| [.markdownlintrc](https://github.com/Hats-Protocol/chain-modules/blob/main/.markdownlintrc ".markdownlintrc") | [.markdownlintrc](https://github.com/Hats-Protocol/chain-modules/blob/main/.markdownlintrc ".markdownlintrc") | [Initial commit](https://github.com/Hats-Protocol/chain-modules/commit/1ea668a8075befd215f1532a277e5964930e6893 "Initial commit") | Apr 3, 2024 |
| [LICENSE](https://github.com/Hats-Protocol/chain-modules/blob/main/LICENSE "LICENSE") | [LICENSE](https://github.com/Hats-Protocol/chain-modules/blob/main/LICENSE "LICENSE") | [Create LICENSE](https://github.com/Hats-Protocol/chain-modules/commit/cbc006f9c2d4f7b9b71d47f7eb1fb5ea33968b2c "Create LICENSE") | Jun 20, 2024 |
| [README.md](https://github.com/Hats-Protocol/chain-modules/blob/main/README.md "README.md") | [README.md](https://github.com/Hats-Protocol/chain-modules/blob/main/README.md "README.md") | [Update README.md](https://github.com/Hats-Protocol/chain-modules/commit/e871606aea2745884815ea40368be91cd886cc20 "Update README.md") | Apr 3, 2024 |
| [example.env](https://github.com/Hats-Protocol/chain-modules/blob/main/example.env "example.env") | [example.env](https://github.com/Hats-Protocol/chain-modules/blob/main/example.env "example.env") | [Initial commit](https://github.com/Hats-Protocol/chain-modules/commit/1ea668a8075befd215f1532a277e5964930e6893 "Initial commit") | Apr 3, 2024 |
| [foundry.toml](https://github.com/Hats-Protocol/chain-modules/blob/main/foundry.toml "foundry.toml") | [foundry.toml](https://github.com/Hats-Protocol/chain-modules/blob/main/foundry.toml "foundry.toml") | [update remappings](https://github.com/Hats-Protocol/chain-modules/commit/24b30610f4091846b1638c6b3731475d5e62d395 "update remappings") | Apr 3, 2024 |
| [funding.json](https://github.com/Hats-Protocol/chain-modules/blob/main/funding.json "funding.json") | [funding.json](https://github.com/Hats-Protocol/chain-modules/blob/main/funding.json "funding.json") | [Create funding.json](https://github.com/Hats-Protocol/chain-modules/commit/d714e730ce4fc2beed9f45ff4ecdda01d7b0df93 "Create funding.json") | May 29, 2024 |
| [remappings.txt](https://github.com/Hats-Protocol/chain-modules/blob/main/remappings.txt "remappings.txt") | [remappings.txt](https://github.com/Hats-Protocol/chain-modules/blob/main/remappings.txt "remappings.txt") | [update remappings](https://github.com/Hats-Protocol/chain-modules/commit/4417ce7f5d06a60e9306ce384f3697428bff0e9f "update remappings") | Apr 3, 2024 |
| View all files |

## Repository files navigation

# Module Chains

[Permalink: Module Chains](https://github.com/Hats-Protocol/chain-modules#module-chains)

What if you want an eligibility criteria to be a combination of conditions implemented in separate modules? For example, to be eligible, a person has to own a certain NFT (e.g. representing a DAO membership) and additionally win an election? That's exactly what the eligibilities/toggles chain modules are for.

## Overview

[Permalink: Overview](https://github.com/Hats-Protocol/chain-modules#overview)

[HatsEligibilitiesChain](https://github.com/Hats-Protocol/chain-modules/blob/main/src/HatsEligibilitiesChain.sol) is an eligibility module that composes any amount of eligibility modules with "and"/"or" logical operations. Similarly, [HatsTogglesChain](https://github.com/Hats-Protocol/chain-modules/blob/main/src/HatsTogglesChain.sol) is a toggle module that composes any amount of toggle modules.

Both of these modules have a similar structure. Modules are chained in a format of a disjunction of conjunction clauses. For example, "(module1 && module2) \|\| module3" has 2 conjunction clauses:

"(module1 && module2)

"module3"

These clauses are chained together with an "or" operation.

## Deriving Wearer Eligibility

[Permalink: Deriving Wearer Eligibility](https://github.com/Hats-Protocol/chain-modules#deriving-wearer-eligibility)

For the eligibilities chain module, a wearer's eligibility is derived by checking eligibility in each module and combining the results according to the chosen logical operations. However, if a wearer is in a bad standing according to any one of the modules, then the module will return a result of "not eligible" and "is in bad standing".

## Deriving Hat Status

[Permalink: Deriving Hat Status](https://github.com/Hats-Protocol/chain-modules#deriving-hat-status)

For the toggles chain module, a hat's status is derived by checking it's status in each module and combining the results according to the chosen logical operations.

## Create New Eligibilities/Toggles Chain Instances

[Permalink: Create New Eligibilities/Toggles Chain Instances](https://github.com/Hats-Protocol/chain-modules#create-new-eligibilitiestoggles-chain-instances)

The module does not use any mutable storage variables and does not use initialization data. It only uses the following immutable variables, which are set at the module instance's creation time:

1. Number of conjunction clauses.
2. Conjunction clauses lengths.
3. The list of eligibility/toggle modules.

Using the example above, here's an example immutable arguments that will be used for the module's deployment:

```
bytes memory otherImmutableArgs = abi.encodePacked(2, [2,1], module1Address, module2Address, module3Address);
```

The module includes the following getters for these immutable variables:

```
function NUM_CONJUCTION_CLAUSES() public pure returns (uint256)

function CONJUCTION_CLAUSE_LENGTHS() public pure returns (uint256[] memory)

function MODULES() public pure returns (address[] memory)
```

## Development

[Permalink: Development](https://github.com/Hats-Protocol/chain-modules#development)

This repo uses Foundry for development and testing. To get started:

1. Fork the project
2. Install [Foundry](https://book.getfoundry.sh/getting-started/installation)
3. To install dependencies, run `forge install`
4. To compile the contracts, run `forge build`
5. To test, run `forge test`

### IR-Optimized Builds

[Permalink: IR-Optimized Builds](https://github.com/Hats-Protocol/chain-modules#ir-optimized-builds)

This repo also supports contracts compiled via IR. Since compiling all contracts via IR would slow down testing workflows, we only want to do this for our target contract(s), not anything in this `test` or `script` stack. We accomplish this by pre-compiled the target contract(s) and then loading the pre-compiled artifacts in the test suite.

First, we compile the target contract(s) via IR by running `FOUNDRY_PROFILE=optimized forge build` (ensuring that FOUNDRY\_PROFILE is not in our .env file)

Next, ensure that tests are using the `DeployOptimized` script, and run `forge test` as normal.

See the wonderful [Seaport repo](https://github.com/ProjectOpenSea/seaport/blob/main/README.md#foundry-tests) for more details and options for this approach.

## About

No description, website, or topics provided.


### Resources

[Readme](https://github.com/Hats-Protocol/chain-modules#readme-ov-file)

### License

[MIT license](https://github.com/Hats-Protocol/chain-modules#MIT-1-ov-file)

[Activity](https://github.com/Hats-Protocol/chain-modules/activity)

[Custom properties](https://github.com/Hats-Protocol/chain-modules/custom-properties)

### Stars

[**1**\\
star](https://github.com/Hats-Protocol/chain-modules/stargazers)

### Watchers

[**1**\\
watching](https://github.com/Hats-Protocol/chain-modules/watchers)

### Forks

[**1**\\
fork](https://github.com/Hats-Protocol/chain-modules/forks)

[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FHats-Protocol%2Fchain-modules&report=Hats-Protocol+%28user%29)

## [Releases](https://github.com/Hats-Protocol/chain-modules/releases)

[1tags](https://github.com/Hats-Protocol/chain-modules/tags)

## [Packages](https://github.com/orgs/Hats-Protocol/packages?repo_name=chain-modules)

No packages published

## [Contributors\  2](https://github.com/Hats-Protocol/chain-modules/graphs/contributors)

- [![@gershido](https://avatars.githubusercontent.com/u/81111572?s=64&v=4)](https://github.com/gershido)[**gershido**](https://github.com/gershido)
- [![@spengrah](https://avatars.githubusercontent.com/u/13247381?s=64&v=4)](https://github.com/spengrah)[**spengrah** Spencer Graham](https://github.com/spengrah)

## Languages

- [Solidity100.0%](https://github.com/Hats-Protocol/chain-modules/search?l=solidity)
