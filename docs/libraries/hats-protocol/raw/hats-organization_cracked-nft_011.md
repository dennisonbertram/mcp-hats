# Source: https://github.com/Hats-Protocol/cracked-nft

[Hats-Protocol](https://github.com/Hats-Protocol)/ **[cracked-nft](https://github.com/Hats-Protocol/cracked-nft)** Public

generated from [spengrah/solidity-template](https://github.com/spengrah/solidity-template)

- [Notifications](https://github.com/login?return_to=%2FHats-Protocol%2Fcracked-nft) You must be signed in to change notification settings
- [Fork\\
0](https://github.com/login?return_to=%2FHats-Protocol%2Fcracked-nft)
- [Star\\
0](https://github.com/login?return_to=%2FHats-Protocol%2Fcracked-nft)


### License

[MIT license](https://github.com/Hats-Protocol/cracked-nft/blob/main/LICENSE)

[0\\
stars](https://github.com/Hats-Protocol/cracked-nft/stargazers) [0\\
forks](https://github.com/Hats-Protocol/cracked-nft/forks) [Branches](https://github.com/Hats-Protocol/cracked-nft/branches) [Tags](https://github.com/Hats-Protocol/cracked-nft/tags) [Activity](https://github.com/Hats-Protocol/cracked-nft/activity)

[Star](https://github.com/login?return_to=%2FHats-Protocol%2Fcracked-nft)

[Notifications](https://github.com/login?return_to=%2FHats-Protocol%2Fcracked-nft) You must be signed in to change notification settings

# Hats-Protocol/cracked-nft

main

[**5** Branches](https://github.com/Hats-Protocol/cracked-nft/branches) [**0** Tags](https://github.com/Hats-Protocol/cracked-nft/tags)

[Go to Branches page](https://github.com/Hats-Protocol/cracked-nft/branches)[Go to Tags page](https://github.com/Hats-Protocol/cracked-nft/tags)

Go to file

Code

Open more actions menu

## Folders and files

| Name | Name | Last commit message | Last commit date |
| --- | --- | --- | --- |
| ## Latest commit<br>[![spengrah](https://avatars.githubusercontent.com/u/13247381?v=4&size=40)](https://github.com/spengrah)[spengrah](https://github.com/Hats-Protocol/cracked-nft/commits?author=spengrah)<br>[Merge pull request](https://github.com/Hats-Protocol/cracked-nft/commit/1f0a53fc09c8648771a326cb5147eb87edba3ece) [#7](https://github.com/Hats-Protocol/cracked-nft/pull/7) [from Hats-Protocol/chore/deploy-mint](https://github.com/Hats-Protocol/cracked-nft/commit/1f0a53fc09c8648771a326cb5147eb87edba3ece)<br>Open commit detailssuccess<br>Jul 9, 2025<br>[1f0a53f](https://github.com/Hats-Protocol/cracked-nft/commit/1f0a53fc09c8648771a326cb5147eb87edba3ece) · Jul 9, 2025<br>## History<br>[47 Commits](https://github.com/Hats-Protocol/cracked-nft/commits/main/) <br>Open commit details<br>[View commit history for this file.](https://github.com/Hats-Protocol/cracked-nft/commits/main/) |
| [.github/workflows](https://github.com/Hats-Protocol/cracked-nft/tree/main/.github/workflows "This path skips through empty directories") | [.github/workflows](https://github.com/Hats-Protocol/cracked-nft/tree/main/.github/workflows "This path skips through empty directories") | [lower coverage requirement since supportsInterface() does not need te…](https://github.com/Hats-Protocol/cracked-nft/commit/f9fb10d7a5a0c081b4016e22b01b622c58d67a3d "lower coverage requirement since supportsInterface() does not need test coverage") | Jul 8, 2025 |
| [data](https://github.com/Hats-Protocol/cracked-nft/tree/main/data "data") | [data](https://github.com/Hats-Protocol/cracked-nft/tree/main/data "data") | [deploy to base mainnet and mint the credentials](https://github.com/Hats-Protocol/cracked-nft/commit/df76a90a12ad3ca62854b1208c86e09288b76071 "deploy to base mainnet and mint the credentials") | Jul 9, 2025 |
| [lib](https://github.com/Hats-Protocol/cracked-nft/tree/main/lib "lib") | [lib](https://github.com/Hats-Protocol/cracked-nft/tree/main/lib "lib") | [add oz deps](https://github.com/Hats-Protocol/cracked-nft/commit/addc188685dd42eb58eff43095b78aafa4dc49a1 "add oz deps") | Jul 7, 2025 |
| [script](https://github.com/Hats-Protocol/cracked-nft/tree/main/script "script") | [script](https://github.com/Hats-Protocol/cracked-nft/tree/main/script "script") | [deploy to base mainnet and mint the credentials](https://github.com/Hats-Protocol/cracked-nft/commit/df76a90a12ad3ca62854b1208c86e09288b76071 "deploy to base mainnet and mint the credentials") | Jul 9, 2025 |
| [src](https://github.com/Hats-Protocol/cracked-nft/tree/main/src "src") | [src](https://github.com/Hats-Protocol/cracked-nft/tree/main/src "src") | [chore: format code with forge fmt](https://github.com/Hats-Protocol/cracked-nft/commit/caea2b8488d84fc227e9766aff62e18130b1e1f3 "chore: format code with forge fmt") | Jul 9, 2025 |
| [test](https://github.com/Hats-Protocol/cracked-nft/tree/main/test "test") | [test](https://github.com/Hats-Protocol/cracked-nft/tree/main/test "test") | [consolidate NFT metadata param inputs](https://github.com/Hats-Protocol/cracked-nft/commit/27652ce498d16f77d373c9badd40f9804959225d "consolidate NFT metadata param inputs") | Jul 9, 2025 |
| [.gitignore](https://github.com/Hats-Protocol/cracked-nft/blob/main/.gitignore ".gitignore") | [.gitignore](https://github.com/Hats-Protocol/cracked-nft/blob/main/.gitignore ".gitignore") | [Initial commit](https://github.com/Hats-Protocol/cracked-nft/commit/e700b3461b5aa2b4067b18c0a49953fa4d522d84 "Initial commit") | Jul 7, 2025 |
| [.gitmodules](https://github.com/Hats-Protocol/cracked-nft/blob/main/.gitmodules ".gitmodules") | [.gitmodules](https://github.com/Hats-Protocol/cracked-nft/blob/main/.gitmodules ".gitmodules") | [add oz deps](https://github.com/Hats-Protocol/cracked-nft/commit/addc188685dd42eb58eff43095b78aafa4dc49a1 "add oz deps") | Jul 7, 2025 |
| [.markdownlintrc](https://github.com/Hats-Protocol/cracked-nft/blob/main/.markdownlintrc ".markdownlintrc") | [.markdownlintrc](https://github.com/Hats-Protocol/cracked-nft/blob/main/.markdownlintrc ".markdownlintrc") | [Initial commit](https://github.com/Hats-Protocol/cracked-nft/commit/e700b3461b5aa2b4067b18c0a49953fa4d522d84 "Initial commit") | Jul 7, 2025 |
| [LICENSE](https://github.com/Hats-Protocol/cracked-nft/blob/main/LICENSE "LICENSE") | [LICENSE](https://github.com/Hats-Protocol/cracked-nft/blob/main/LICENSE "LICENSE") | [add MIT license](https://github.com/Hats-Protocol/cracked-nft/commit/04d101c05f4f8dd8bac84e3234bfebe8e1e3cedd "add MIT license") | Jul 9, 2025 |
| [README.md](https://github.com/Hats-Protocol/cracked-nft/blob/main/README.md "README.md") | [README.md](https://github.com/Hats-Protocol/cracked-nft/blob/main/README.md "README.md") | [chore: format markdown](https://github.com/Hats-Protocol/cracked-nft/commit/bcc3b2fdedad7b77a38c0a9aa0743fc1c8e872ab "chore: format markdown") | Jul 8, 2025 |
| [example.env](https://github.com/Hats-Protocol/cracked-nft/blob/main/example.env "example.env") | [example.env](https://github.com/Hats-Protocol/cracked-nft/blob/main/example.env "example.env") | [Initial commit](https://github.com/Hats-Protocol/cracked-nft/commit/e700b3461b5aa2b4067b18c0a49953fa4d522d84 "Initial commit") | Jul 7, 2025 |
| [foundry.toml](https://github.com/Hats-Protocol/cracked-nft/blob/main/foundry.toml "foundry.toml") | [foundry.toml](https://github.com/Hats-Protocol/cracked-nft/blob/main/foundry.toml "foundry.toml") | [add minting script](https://github.com/Hats-Protocol/cracked-nft/commit/aaef84327a4ffe3bc6fa5d310e6aaf7e2f24c05c "add minting script") | Jul 8, 2025 |
| [lcov.info](https://github.com/Hats-Protocol/cracked-nft/blob/main/lcov.info "lcov.info") | [lcov.info](https://github.com/Hats-Protocol/cracked-nft/blob/main/lcov.info "lcov.info") | [lower coverage requirement since supportsInterface() does not need te…](https://github.com/Hats-Protocol/cracked-nft/commit/f9fb10d7a5a0c081b4016e22b01b622c58d67a3d "lower coverage requirement since supportsInterface() does not need test coverage") | Jul 8, 2025 |
| View all files |

## Repository files navigation

# Cracked NFT

[Permalink: Cracked NFT](https://github.com/Hats-Protocol/cracked-nft#cracked-nft)

A non-transferrable NFT contract with voting capabilities for recognizing elite Farcaster builders.

## Overview

[Permalink: Overview](https://github.com/Hats-Protocol/cracked-nft#overview)

CrackedCredential is an ERC721Votes token contract that serves as "The self-curated hall of fame for elite Farcaster builders." These credentials are designed to be permanent, non-transferrable recognition tokens that also function as governance voting units.

## Key Features

[Permalink: Key Features](https://github.com/Hats-Protocol/cracked-nft#key-features)

- **Non-transferrable**: Once minted, tokens cannot be transferred between addresses (except burning)
- **Burnable**: Token owners can burn their own tokens to remove them from circulation
- **One token per address**: Each address can only own one credential token
- **Voting Power**: Each NFT represents 1 vote in governance decisions
- **Auto-delegation**: Newly minted tokens are automatically delegated to the recipient
- **Delegation**: Token holders can delegate their voting power to others without transferring the NFT
- **Owner-only minting**: Only the contract owner can mint new credentials
- **Batch minting**: Support for minting multiple tokens in a single transaction
- **Approval disabled**: Approvals are disabled for security (no `approve` or `setApprovalForAll`)
- **On-chain metadata**: Token metadata is generated and encoded on-chain using Base64
- **EIP-712 Support**: Secure signature-based delegation using typed structured data
- **Zero address protection**: Cannot mint to address(0)
- **Comprehensive validation**: Safer minting with recipient validation

## Contract Details

[Permalink: Contract Details](https://github.com/Hats-Protocol/cracked-nft#contract-details)

- **Token Name**: Cracked Farcaster Dev
- **Symbol**: CFD
- **Standard**: ERC721Votes (extends ERC721 with OpenZeppelin Votes functionality)
- **EIP-712 Domain**: "Cracked Farcaster Dev" version "1"
- **Clock Mode**: Timestamp-based (ERC-6372 compliant)

## Usage

[Permalink: Usage](https://github.com/Hats-Protocol/cracked-nft#usage)

### Deployment

[Permalink: Deployment](https://github.com/Hats-Protocol/cracked-nft#deployment)

Deploy the contract with an initial owner address who will have minting privileges:

```
CrackedCredential credential = new CrackedCredential("Cracked Farcaster Dev", "CFD", <initialOwner>);
```

### Minting

[Permalink: Minting](https://github.com/Hats-Protocol/cracked-nft#minting)

Mint single or multiple credentials (auto-delegates to recipients):

```
// Single mint
credential.safeMint(recipient);

// Batch mint
address[] memory recipients = [addr1, addr2, addr3];
credential.safeMintBatch(recipients);
```

**Minting Requirements:**

- Only the contract owner can mint
- Recipient must not be address(0)
- Recipient must not already own a token (one token per address)
- All recipients in batch must be unique

### Burning

[Permalink: Burning](https://github.com/Hats-Protocol/cracked-nft#burning)

Token owners can burn their own tokens:

```
// Burn your own token
credential.burn(tokenId);
```

**Burning Requirements:**

- Only the token owner can burn their token
- Burning removes the token from circulation and burns the voting power

### Voting & Delegation

[Permalink: Voting & Delegation](https://github.com/Hats-Protocol/cracked-nft#voting--delegation)

```
// Check voting power
uint256 votes = credential.getVotes(account);

// Check who someone delegated to
address delegatee = credential.delegates(account);

// Delegate voting power to someone else (without transferring NFT)
credential.delegate(delegatee);

// Delegate via signature (gasless)
credential.delegateBySig(delegatee, nonce, expiry, v, r, s);

// Check historical voting power
uint256 pastVotes = credential.getPastVotes(account, blockNumber);
```

### Key Voting Mechanics

[Permalink: Key Voting Mechanics](https://github.com/Hats-Protocol/cracked-nft#key-voting-mechanics)

1. **Auto-delegation**: When minted, tokens are automatically delegated to the recipient
2. **NFT Ownership vs Voting Power**:

   - NFT ownership and voting power are separate
   - You keep your NFT even when delegating votes to others
   - Transfers are blocked, but delegation is always allowed
3. **Vote Weight**: Each NFT = 1 vote regardless of token ID
4. **Vote Tracking**: Voting power is tracked over time for governance snapshots
5. **Timestamp-based**: Uses `block.timestamp` instead of block numbers for time tracking (ERC-6372)

## Security Features

[Permalink: Security Features](https://github.com/Hats-Protocol/cracked-nft#security-features)

- **Non-transferrable**: Tokens cannot be transferred (except burning)
- **Approval disabled**: `approve()` and `setApprovalForAll()` are disabled
- **One token per address**: Prevents accumulation of multiple tokens
- **Zero address protection**: Cannot mint to address(0)
- **Owner-only minting**: Only contract owner can create new credentials
- **Burn authorization**: Only token owners can burn their own tokens

## Examples

[Permalink: Examples](https://github.com/Hats-Protocol/cracked-nft#examples)

### Basic Voting Flow

[Permalink: Basic Voting Flow](https://github.com/Hats-Protocol/cracked-nft#basic-voting-flow)

```
// Deploy
CrackedCredential cred = new CrackedCredential("Cracked Farcaster Dev", "CFD", <owner>);

// Mint to Alice (auto-delegated)
cred.safeMint(alice);
assert(cred.getVotes(alice) == 1);        // Alice has 1 vote
assert(cred.delegates(alice) == alice);   // Alice delegated to herself

// Alice delegates to Bob
cred.delegate(bob);
assert(cred.getVotes(alice) == 0);        // Alice now has 0 votes
assert(cred.getVotes(bob) == 1);          // Bob now has 1 vote
assert(cred.ownerOf(0) == alice);         // Alice still owns the NFT

// Alice burns her token
cred.burn(0);
assert(cred.getVotes(bob) == 0);          // Bob loses the delegated vote
```

### Governance Integration

[Permalink: Governance Integration](https://github.com/Hats-Protocol/cracked-nft#governance-integration)

```
// In a Governor contract
function propose(...) external returns (uint256) {
    // Voting power is automatically checked via ERC721Votes
    require(getVotes(msg.sender, block.number - 1) >= proposalThreshold());
    // ... rest of proposal logic
}
```

### Error Handling

[Permalink: Error Handling](https://github.com/Hats-Protocol/cracked-nft#error-handling)

```
// These will revert:
credential.safeMint(address(0));                    // InvalidRecipient
credential.safeMint(alice); credential.safeMint(alice); // RecipientAlreadyOwnsToken
credential.approve(bob, 0);                         // ApprovalDisabled
credential.transferFrom(alice, bob, 0);            // NotTransferrable
```

## Development

[Permalink: Development](https://github.com/Hats-Protocol/cracked-nft#development)

Built with Foundry. Install dependencies:

```
forge install
```

Run tests:

```
forge test
```

Run with coverage:

```
forge coverage
```

## Contract Architecture

[Permalink: Contract Architecture](https://github.com/Hats-Protocol/cracked-nft#contract-architecture)

The contract follows OpenZeppelin best practices with:

- **Comprehensive NatSpec documentation**: All functions are fully documented
- **Proper function ordering**: Functions organized by visibility and purpose
- **Error handling**: Custom errors for better gas efficiency and clarity
- **Security-first design**: Disabled approvals, non-transferrable tokens
- **Voting integration**: Full ERC721Votes implementation for governance
- **On-chain metadata**: Base64-encoded JSON metadata generated on-chain

## About

No description, website, or topics provided.


### Resources

[Readme](https://github.com/Hats-Protocol/cracked-nft#readme-ov-file)

### License

[MIT license](https://github.com/Hats-Protocol/cracked-nft#MIT-1-ov-file)

[Activity](https://github.com/Hats-Protocol/cracked-nft/activity)

[Custom properties](https://github.com/Hats-Protocol/cracked-nft/custom-properties)

### Stars

[**0**\\
stars](https://github.com/Hats-Protocol/cracked-nft/stargazers)

### Watchers

[**0**\\
watching](https://github.com/Hats-Protocol/cracked-nft/watchers)

### Forks

[**0**\\
forks](https://github.com/Hats-Protocol/cracked-nft/forks)

[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FHats-Protocol%2Fcracked-nft&report=Hats-Protocol+%28user%29)

## [Releases](https://github.com/Hats-Protocol/cracked-nft/releases)

No releases published

## [Packages](https://github.com/orgs/Hats-Protocol/packages?repo_name=cracked-nft)

No packages published

## Languages

- [Solidity100.0%](https://github.com/Hats-Protocol/cracked-nft/search?l=solidity)
